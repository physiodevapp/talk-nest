<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Physiodevapp Chat</title>
  <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      const menuButton = document.getElementById('menuButton');
      const menu = document.getElementById('menu');

      if (!menuButton || !menu) {
        console.error('menuButton or menu not found in the DOM');
        return;
      }

      menuButton.addEventListener('click', () => {
        const isHidden = menu.classList.contains('hidden');
        if (isHidden) {
          menu.classList.remove('hidden');
          menu.classList.remove('scale-95');
          menu.classList.add('scale-100');
        } else {
          menu.classList.add('hidden');
          menu.classList.remove('scale-100');
          menu.classList.add('scale-95');
        }
      });

      document.addEventListener('click', (event) => {
        if (!menu.contains(event.target) && !menuButton.contains(event.target)) {
          menu.classList.add('hidden');
          menu.classList.remove('scale-100');
          menu.classList.add('scale-95');
        }
      });
    });
  </script>
</head>

<body class="bg-gray-100 font-sans h-screen">
  <div class="max-w-md mx-auto bg-white shadow-lg overflow-hidden h-full chat">
    <!-- Header -->
    <header class="relative bg-[#8b45f7] text-white p-4 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <div class="rounded-full bg-gray-300 h-8 w-8"></div>
        <h1 class="text-lg font-semibold">
          <%= user %>
        </h1>
      </div>
      <button id="menuButton">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v.01M12 12v.01M12 18v.01" />
        </svg>
      </button>
      <div id="menu"
        class="hidden absolute right-6 top-[3em] w-48 bg-white rounded shadow-lg transition-transform duration-300 transform origin-top-right scale-95">
        <a href="/profile" class="block px-4 py-2 text-gray-700 rounded hover:bg-gray-100">Profile</a>
        <!-- <a href="/logout" class="block px-4 py-2 text-gray-700 rounded hover:bg-gray-100">Logout</a> -->
        <form action="/logout" method="POST" class="block">
          <!-- Asegúrate de incluir el token CSRF si usas un framework como Laravel -->
          <button type="submit" class="w-full text-left px-4 py-2 text-gray-700 rounded hover:bg-gray-100">
            Logout
          </button>
        </form>
      </div>
    </header>

    <!-- Chat Section -->
    <main class="p-4 flex flex-col space-y-4 overflow-auto h-[calc(100%-8rem)]">
      <!-- Response -->
      <div class="flex flex-col space-y-2">
        <div class="relative bg-gray-100 p-3 rounded-bl-lg rounded-br-lg rounded-tr-lg">
          <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-0 left-0 -translate-x-2" width="20" height="20"
            viewBox="0 0 20 20">
            <path d="M20 20 L20 0 L0 0 Z" fill="#f3f4f6"></path>
          </svg>
          <p class="text-gray-800">Hola, Jasmin 👋 Estás chateando con Endomoto. ¿En qué podemos ayudarte?</p>
        </div>
      </div>

      <!-- User Input -->
      <div class="relative bg-[#d9ffdb] p-3 rounded-bl-lg rounded-br-lg rounded-tl-lg self-end">
        <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-0 right-0 translate-x-2" width="20" height="20"
          viewBox="0 0 20 20">
          <path d="M0 0 L0 20 L20 0 Z" fill="#d9ffdb"></path>
        </svg>
        <p class="text-gray-800">Autorizarnos a contactarte</p>
      </div>

      <!-- Bot Response -->
      <div class="relative bg-gray-100 p-3 rounded-bl-lg rounded-br-lg rounded-tr-lg self-start">
        <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-0 left-0 -translate-x-2" width="20" height="20"
          viewBox="0 0 20 20">
          <path d="M20 20 L20 0 L0 0 Z" fill="#f3f4f6"></path>
        </svg>
        <p class="text-gray-800">Toca abajo para personalizar cómo prefieres recibir más información en WhatsApp.</p>
        <button class="bg-blue-500 text-white py-1 px-4 rounded-lg mt-2">Ir al sitio web</button>
      </div>
    </main>

    <!-- Input Section -->
    <div class="bg-gray-200 p-3 flex items-center space-x-2">
      <input type="text" placeholder="Escribe un mensaje"
        class="flex-1 p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#075e54]" />
      <button class="bg-[#8b45f7] text-white p-2 rounded-full">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div>
  </div>
</body>

</html>